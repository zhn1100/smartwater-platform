import{r as c,a as x,i as y,u as V,c as k,b as s,d as l,w as a,e as n,o as h,f as _,g as R,h as B,l as C,j as E,k as F,E as m}from"./index-BuXRkc_I.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"login-container"},q={class:"login-card"},z={class:"login-form"},K={__name:"Login",setup(U){const f=V(),t=c(),i=c(!1),o=x({username:"",password:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},g=async()=>{var u,e;if(t.value)try{await t.value.validate(),i.value=!0,await F(o.username,o.password),m.success("登录成功"),f.push("/monitor")}catch(r){console.error("登录失败:",r),(e=(u=r.response)==null?void 0:u.data)!=null&&e.message?m.error(`登录失败: ${r.response.data.message}`):m.error("登录失败，请检查用户名和密码")}finally{i.value=!1}};return y()&&f.push("/monitor"),(u,e)=>{const r=n("el-input"),d=n("el-form-item"),w=n("el-button"),b=n("el-form");return h(),k("div",N,[s("div",q,[e[4]||(e[4]=s("div",{class:"login-header"},[s("h1",null,"智慧水利监测平台"),s("p",null,"水利工程安全监测与数据分析系统")],-1)),s("div",z,[l(b,{ref_key:"loginFormRef",ref:t,model:o,rules:v,"label-width":"80px",size:"large"},{default:a(()=>[l(d,{label:"用户名",prop:"username"},{default:a(()=>[l(r,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=p=>o.username=p),placeholder:"请输入用户名","prefix-icon":_(R)},null,8,["modelValue","prefix-icon"])]),_:1}),l(d,{label:"密码",prop:"password"},{default:a(()=>[l(r,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=p=>o.password=p),type:"password",placeholder:"请输入密码","prefix-icon":_(C),"show-password":"",onKeyup:B(g,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),l(d,null,{default:a(()=>[l(w,{type:"primary",size:"large",loading:i.value,onClick:g,style:{width:"100%"}},{default:a(()=>[...e[2]||(e[2]=[E(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e[3]||(e[3]=s("div",{class:"login-tips"},[s("p",null,[s("strong",null,"测试账号：")]),s("p",null,"管理员：admin / admin123"),s("p",null,"普通用户：user / user123")],-1))]),e[5]||(e[5]=s("div",{class:"login-footer"},[s("p",null,"© 2024 河海大学智慧水利研究中心")],-1))]),e[6]||(e[6]=s("div",{class:"login-background"},[s("div",{class:"bg-water"}),s("div",{class:"bg-dam"})],-1))])}}},I=L(K,[["__scopeId","data-v-5f5864f1"]]);export{I as default};
